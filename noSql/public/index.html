<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Airtable</title>
    <link rel="stylesheet" href="estilos.css">
</head>

<body>
    <h1>Productos Disponibles</h1>
    <div id="item-list">

    </div>
    <h1>Agregar Nuevos Productos</h1>
    <form action="/items" method="post">
        <label for="nombre">Nombre Producto: </label>
        <input type="text" id="nombre" name="nombre" required><br>
        <label for="precio">Precio: </label>
        <input type="number" name="precio" id="precio" required><br>
        <label for="imagen">Url de la Imagen: </label>
        <input type="text" name="imagen" id="imagen" required>
        <br>
        <button type="submit">Agregar Producto</button>

    </form>




<script src="scripta.js"></script> 
<script>
    //Configurar la funcion para mostrar los productos de la base de datos en cardview
function mostrarProductos(elementos){
    const itemList=document.getElementById("item-list");
    itemList.innerHTML=""; //Limpiar el contenido anterior

    elementos.forEach(elemento=>{
        const card=document.createElement('div');
        card.classList.add('card');

        const imagen=document.createElement('img');
        imagen.src=elemento.Imagen;
        card.appendChild(imagen);

        const nombre=document.createElement('h3');
        nombre.textContent=elemento.Nombre;
        card.appendChild(nombre);

        const precio=document.createElement('p');
        precio.textContent='Precio: '+elemento.Precio+'Bs';
        card.appendChild(precio);

        itemList.appendChild(card);

    });
}
//Obtener los producto del servidor y mostrar en los cardviews
async function obtenerElementos(){
    try{
        const respuesta=await fetch('/items');
        const data=await respuesta.json();
        mostrarProductos(data)
    }catch(error){
        console.error('Error al obtener los productos', error);
    }
}
//llamar a la funcion para obtener y mostrar los productos
window.addEventListener('DOMContentLoaded',obtenerElementos);
    
//Creacion de un nuevo Producto





</script>

</body>
</html>